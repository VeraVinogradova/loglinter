# Loglinter

–õ–∏–Ω—Ç–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥-–∑–∞–ø–∏—Å–µ–π –≤ Go, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å `golangci-lint`. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã –ª–æ–≥–≥–µ—Ä–æ–≤ `log/slog` –∏ `go.uber.org/zap` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

–õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —á–µ—Ç—ã—Ä–µ–º –ø—Ä–∞–≤–∏–ª–∞–º:

1.  **–°—Ç—Ä–æ—á–Ω–∞—è –±—É–∫–≤–∞**: —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã.
    *   ‚ùå `log.Info("Starting server")`
    *   ‚úÖ `log.Info("starting server")`

2.  **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫**: —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ.
    *   ‚ùå `slog.Error("–æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")`
    *   ‚úÖ `slog.Error("connection failed")`

3.  **–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –∏ —ç–º–æ–¥–∑–∏**: —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —ç–º–æ–¥–∑–∏ –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ (`!!!`, `...`, `??`).
    *   ‚ùå `log.Info("server started!üöÄ")`
    *   ‚úÖ `log.Info("server started")`

4.  **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ä–æ–ª–µ–π, —Ç–æ–∫–µ–Ω–æ–≤ –∏–ª–∏ –∫–ª—é—á–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `password`, `token`, `secret`).
    *   ‚ùå `log.Debug("api_key=" + apiKey)`
    *   ‚úÖ `log.Debug("api request completed")`

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   Go –≤–µ—Ä—Å–∏–∏ 1.24 –∏–ª–∏ –≤—ã—à–µ.
*   –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è [golangci-lint](https://golangci-lint.run/).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å –ª–∏–Ω—Ç–µ—Ä –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –∏–ª–∏ –∫–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è `golangci-lint`.

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/VeraVinogradova/loglinter
    cd loglinter
    ```

2.  **–°–∫–∞—á–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    go mod download
    ```

3.  **–°–æ–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª:**
    ```bash
    go build -o loglinter ./cmd/loglinter
    ```

4.  **–°–æ–±–µ—Ä–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –¥–ª—è `golangci-lint`:**
    ```bash
    go build -o loglinter.so -buildmode=plugin ./cmd/loglinter
    ```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∞–∫–µ—Ç–∞:

```bash
./loglinter ./...
```

### –ö–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è golangci-lint

1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –ø–ª–∞–≥–∏–Ω–∞ `loglinter.so` –≤ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ—Ä–µ–Ω—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞).

2. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.golangci.yml` –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```yaml
linters-settings:
  custom:
    loglinter:
      path: ./loglinter.so
      description: –õ–∏–Ω—Ç–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–æ–≤

linters:
  enable:
    - loglinter
````

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ golangci-lint:

````bash
golangci-lint run
````

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–±–æ—Ç—É –ª–∏–Ω—Ç–µ—Ä–∞, —Å–æ–∑–¥–∞–≤ —Ñ–∞–π–ª `.loglinter.json` –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

* `sensitive_words`: —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏.

* `custom_patterns`: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ regex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, email, IP-–∞–¥—Ä–µ—Å).

* `auto_fix`: –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É).

* `disabled_rules`: —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª (`lowercase`, `english`, `specialchars`, `sensitive`), –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å.

–ü—Ä–∏–º–µ—Ä `.loglinter.json`:

```json
{
"sensitive_words": ["password", "token", "secret"],
"custom_patterns": {
"email": "[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}"
},
"auto_fix": true,
"disabled_rules": []
}
````

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã
–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (`main.go`):

````go
package main

import (
    "log/slog"
)

func main() {
    slog.Info("Starting server")        // –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ 1
    slog.Info("–æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")      // –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ 2
    slog.Info("server started üöÄ")       // –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ 3
    slog.Info("user password: 123")      // –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ 4
}
````
### –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

````text
main.go:7:2: message must start with lowercase letter (loglinter)
main.go:8:2: message must be in english (loglinter)
main.go:9:2: message contains special characters or emoji (loglinter)
main.go:10:2: message contains sensitive data (loglinter)
````

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –∑–∞–ø—É—Å–∫–∞ unit-—Ç–µ—Å—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

````bash
cd loglinter/testdata
go test
````